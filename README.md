# Synthetic Image Generator

## Overview: This project generates synthetic fluorescent images and its corresponding labeled images to be used to train models. It also implements and tests a Mask R-CNN model by using the generated images.

## Project Structure
[matlab](matlab): This folder contains a MATLAB script. This MATLAB script generates synthetic fluorescent images and a corresponding labeled instance segmentation image. These images will be shown in figure in MATLAB environment and also saved as PNG 

[matlab_batch](matlab_batch): The MATLAB scripts in this folder allows for batch generation of images by converting the script in [matlab](matlab) into functions. It also converted the script for generating cell center and cell shape into seperate functions to make the final script short and concise, and allows for further addition of cell shapes. Run example.m for a preview of images and batch_run.m for batch generation.

[matlab_app](matlab.app): This folder contains MATLAB scripts that will generate a GUI for generating synthetic fluorescent image and a corresponding labeled imstance segmentation image. Run the image_generator_app.m file to have a GUI to work with. I am using MATLAB online for coding and debugging, so I don't have access to APP package. 

[Mask_R_CNN](Mask_R_CNN): This folder contains an example for the implementation and test a Mask R-CNN model using the fluorescent images and their corresponding labeled images generated by the above MATLAB script. You can open [Mask_RCNN_testing.ipynb](Mask_R_CNN/Mask_RCNN_testing.ipynb) to see the training process and result.

## Assumption for the Image Generator:

**1. Random Elliptical cells**: Each cell has elliptical shape, which is generated with random semi-major and semi-minor axes, and a random rotation angel. The “size”, which is the base radius can be adjusted to show larger or smaller cells. 

**2. Homogeneous distribution of Fluorescent**: I assume that the fluorescent is expressed homogeneously in the whole cell. A Gaussian blur is added to mimic the real image but the assumption is there is no difference of fluorescent expression level in the nucleus and cytoplasma.

**3. No Overlap**: The cells are placed in a way that they do not overlap.

**4. Gaussian Blur**: The fluorescent image is blurred with Gaussian method to mimic the fluorescent glow effect.

**5. Labeling:** Each ellipse has a unique label in the instance segmentation image.

**6. Saving output:** The generated image (fluorescent image in uint16 and labeled image as uint8) are saved as PNG files
